const bgm=new Audio("./assets/map-my-future-bgm.ogg");bgm.play(),bgm.loop=!0,document.addEventListener("DOMContentLoaded",(()=>{const n=document.querySelectorAll(".location");document.getElementsByClassName("map")[0].onload=function(n){let t=null,e={x:0,y:0};const o=n.target;let a,i,s,c,l,m=null;function d(n){const t=o.getScreenCTM();return{x:(n.clientX-t.e)/t.a,y:(n.clientY-t.f)/t.d}}function r(n){t=null}o.addEventListener("mousedown",(function(n){if(t=n.target.parentNode,t.classList.contains("undraggable"))return void(t=null);t.classList.contains("confined")&&(a=t.getBBox(),i=-100-a.x,c=2200-a.x-a.width,s=-30-a.y,l=1200-a.y-a.height);e=d(n);const r=t.transform.baseVal;if(0===r.length){const n=o.createSVGTransform();n.setTranslate(0,0),t.transform.baseVal.insertItemBefore(n,0)}m=r.getItem(0),e.x-=m.matrix.e,e.y-=m.matrix.f})),o.addEventListener("mousemove",(function(n){if(t){n.preventDefault();const o=d(n);let a=o.x-e.x,r=o.y-e.y;t.classList.contains("confined")&&(a<i?a=i:a>c&&(a=c),r<s?r=s:r>l&&(r=l)),m.setTranslate(a,r)}})),o.addEventListener("mouseup",r),o.addEventListener("mouseleave",r)},n.forEach((n=>{n.addEventListener("click",(()=>{const t=n.getAttribute("data-location");console.log(`${t} is selected.`),"Cartomancy"===t?window.location.href="./mini-apps/cartomancy/cartomancy.html":"Molybdomancy"===t?window.location.href="./mini-apps/molybdomancy/molybdomancy.html":"Fortune Stick"===t?window.location.href="./mini-apps/fortune_stick/fortune_stick.html":"Yin Yang Coin"===t&&(window.location.href="./mini-apps/yin_yang_coin/yin_yang_coin.html")}))}));let t=!0,e=!1;const o=document.getElementById("music-button"),a=document.getElementById("info-button");o.addEventListener("click",(n=>{const e=document.querySelectorAll("img")[0];t?(e.src="./assets/audio_off.png",bgm.pause()):(e.src="./assets/audio_on.png",bgm.play()),t=!t})),a.addEventListener("click",(n=>{document.getElementById("info-popup").style.display=e?"none":"flex",e=!e}))}));
